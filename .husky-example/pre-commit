#!/bin/sh
# Pre-commit hook example
# To use: npm install husky --save-dev && npx husky install

echo "ğŸ” Running pre-commit checks..."

# Run tests
echo "ğŸ“ Running tests..."
pnpm run test-headless
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Commit aborted."
  exit 1
fi

# Run build
echo "ğŸ”¨ Running build..."
pnpm run build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed. Commit aborted."
  exit 1
fi

# Run audit
echo "ğŸ”’ Running security audit..."
pnpm audit
if [ $? -ne 0 ]; then
  echo "âš ï¸  Security vulnerabilities found. Please review."
fi

echo "âœ… All checks passed!"
exit 0
